% !TEX root = ../main.tex
% !TEX encoding = UTF-8
% !TEX spellcheck = it-IT
% !TEX program = xelatex

\section{Composizione del dataset}
\begin{frame}[t]{Raccolta dei dati giornalieri}
  Dati meteorologici reperiti da:
  \begin{itemize}
    \item 11 dataset ARPA/SIR o provinciali;
    \item 9 dataset sovraregionali (3 italiani, 6 esteri).
  \end{itemize}

  \begin{figure}
    \centering
    \small
    \input{ASSETS/composizione_dataset/sources_availability}
    \caption*{Disponibilità temporale di alcuni dei dataset sorgenti}
  \end{figure}
\end{frame}

\begin{frame}{Raccolta dei dati giornalieri}
  Problemi incontrati:
  \begin{itemize}
    \item disomogeneità e obsolescenza delle interfacce di accesso ai dati;
    \item disomogeneità e incoerenze tra dataset differenti;
    \item presenza di serie completamente o parzialmente duplicate;
    \item generale carenza di tracce storiche delle stazioni.
  \end{itemize}
  Soluzioni:
  \begin{itemize}
    \item \emph{merging} intra- e inter-dataset;
    \item controllo manuale delle collocazioni dubbie.
  \end{itemize}
\end{frame}

\begin{frame}[t]{\emph{Merging}: procedura}
  Combinazione di serie con strumenti della teoria dei grafi.
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \begin{itemize}
        \item Regione per regione:
          \begin{itemize}
            \item \emph{Matching}: corrispondenze tra singole serie;
            \item Raggruppamento in serie rappresentative;
            \item Combinazione e integrazione;
            \item Correzione manuale dei metadati.
          \end{itemize}
        \item \emph{Merging} complessivo a posteriori.
      \end{itemize}
    \end{column}
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \includegraphics{ASSETS/composizione_dataset/reggio_series_graph_pmod.pdf}
        \caption*{Grafo dei \emph{match} di alcune serie di Reggio Emilia.}
      \end{figure}

    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\emph{Merging}: risultati}
  \begin{itemize}
    \item \(\approx 2500\) serie italiane di cui \(\approx 2350\) con almeno 5 anni di dati: \(\approx 3\) serie ogni \(\qty{100}{\kilo\meter^2}\);
    \item Disponibilità temporale sul trentennio significativamente superiore ai dataset sorgenti;
    \item Distribuzione geografica ben rappresentativa del territorio.
  \end{itemize}
  \begin{figure}
    \centering
    \small
    \begin{subfigure}[t]{0.45\textwidth}
      \small
      \input{ASSETS/composizione_dataset/improvements}
      \caption*{Numero di serie disponibili con almeno n anni.}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.45\textwidth}
      \small
      \input{ASSETS/composizione_dataset/elevation_distribution}
      \caption*{Distribuzione in quota delle serie ottenute.}
    \end{subfigure}
  \end{figure}
\end{frame}

\begin{frame}{Controllo qualità ed omogeneizzazione}
  \begin{enumerate}
    \item Controllo degli errori palesi: \(\lvert \mathrm{T} \rvert > \qty{50}{\degreeCelsius}\) e dati ripetuti;
    \item Confronto con serie sintetiche ERA5;
    \item Confronto con serie limitrofe;
    \item \emph{Gap filling} dei dati mancanti.
  \end{enumerate}
\end{frame}